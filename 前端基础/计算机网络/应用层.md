# 进程通信
在操作系统术语中，进行通信的实际上是**进程(process)**。多数应用程序是由**通信进程对**组成，进程通过**套接字(socket)**软件接口向网络发送报文和从网络接收报文。

**套接字**是同一台主机内应用层与运输层之间的接口。所以套接字也被称为应用程序和网络之间的**应用程序编程接口(API)**

> 如果把进程看成房子，套接字就可以类比成门。一个进程想与另外一台主机的另一个进程通信，就要把报文推出该门（套接字）。

# 应用层协议
**应用层协议**定义了运行在不同端系统上的应用程序进程如何相互传递报文。

## HTTP
HTTP定义了HTTP报文的结构以及客户和服务器进行报文交换的方式。

HTTP使用TCP作为支撑运输协议。HTTP客户首先发起一个与服务器的TCP连接。一旦连接建立，浏览器和服务器进程就可以通过套接字接口访问TCP。

HTTP服务器并不保存关于客户的任何信息，所以HTTP是一个**无状态协议**.(比如：某个特定的用户在短短几秒钟内两次请求同一个对象，服务器不会因为刚刚为该用户提供了对象就不再作出反应)

### 非持续连接和持续连接
非持续连接：某个用户的每个请求／响应对是经单独的TCP连接发送。
持续连接：某个用户的每个请求／响应对是经相同的TCP连接发送。


#### 非持续连接消耗
粗略估算从客户请求HTML基本文件起到该客户受到整个文件所花费的时间:

1. TCP三次握手的前两部分消耗一个RTT(round-trip time).
2. 第三部分和响应返回消耗一个RTT。 服务器响应传输文件消耗t时间。

**总消耗时间 = 2 RTT+t**

一般浏览器会打开5 ~ 10个并行的Tcp连接，而每条连接处理一个请求响应事务。所以非持续连接可能会导致串行请求，会产生不必要的TCP连接时间。

### HTTP报文格式

#### HTTP请求报文

```js
get /somedir/page.html HTTP/1.1      -----> 请求行
Host: www.someschool.edu    ------ > 首部行
connection: close           ------ > 首部行
User-agent: Mozilla/5.0     ------ > 首部行
Accept-language: fr         ------ > 首部行
```

**请求行**：HTTP请求报文的第一行。包括**方法字段**, **URL字段**, **HTTP版本字段**。


#### HTTP相应报文

```js
HTTP/1.1 200 OK     -----> 状态行
Connection: close。     -----> 首部行
Date: ·····             -----> 首部行
Last-Modified: ·····    -----> 首部行
·····

（data, data, data）  ----> 实体主体
```

**状态行**: **Http协议版本**， **状态🐎**，**状态🐎相应的状态信息**
